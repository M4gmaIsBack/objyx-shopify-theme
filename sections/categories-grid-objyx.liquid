{{ 'section-categories-grid-objyx.css' | asset_url | stylesheet_tag }}

<section
  class="categories-grid-objyx section-categories-grid"
  data-desktop-columns="{{ section.settings.columns_desktop }}"
  data-mobile-columns="{{ section.settings.columns_mobile }}"
>
  <div class="categories-grid-objyx__container">
    {%- if section.settings.heading != blank -%}
      <h2 class="categories-grid-objyx__heading">{{ section.settings.heading }}</h2>
    {%- endif -%}

    <div class="categories-grid-objyx__grid">
      {%- for collection in collections -%}
        {%- unless collection.handle == 'all'
          or collection.handle == 'frontpage'
          or collection.handle == 'nouveautes'
          or collection.featured_image == blank
        -%}
          {%- if collection.featured_image and collection.featured_image.src -%}
            <a href="{{ collection.url }}" class="categories-grid-objyx__card">
              <div class="categories-grid-objyx__image-wrapper">
                <img
                  src="{{ collection.featured_image | image_url: width: 600 }}"
                  srcset="
                    {{ collection.featured_image | image_url: width: 300 }} 300w,
                    {{ collection.featured_image | image_url: width: 600 }} 600w,
                    {{ collection.featured_image | image_url: width: 900 }} 900w
                  "
                  sizes="(min-width: 990px) 25vw, (min-width: 750px) 33vw, 50vw"
                  alt="{{ collection.title | escape }}"
                  loading="lazy"
                  class="categories-grid-objyx__image"
                >
                <div class="categories-grid-objyx__overlay">
                  <h3 class="categories-grid-objyx__title-overlay">{{ collection.title }}</h3>
                </div>
              </div>
              <div class="categories-grid-objyx__content">
                <h3 class="categories-grid-objyx__title-bottom">{{ collection.title }}</h3>
              </div>
            </a>
          {%- endif -%}
        {%- endunless -%}
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Catégories Grille",
  "tag": "section",
  "class": "section-categories-grid",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Titre de la section"
    },
    {
      "type": "checkbox",
      "id": "show_product_count",
      "label": "Afficher le nombre de produits",
      "default": true
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 2,
      "max": 5,
      "step": 1,
      "default": 4,
      "label": "Colonnes sur desktop"
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "options": [
        {
          "value": "1",
          "label": "1 colonne"
        },
        {
          "value": "2",
          "label": "2 colonnes"
        }
      ],
      "default": "2",
      "label": "Colonnes sur mobile"
    }
  ],
  "presets": [
    {
      "name": "Catégories Grille"
    }
  ]
}
{% endschema %}
